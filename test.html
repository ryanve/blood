<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="dns-prefetch" href="//airve.com">
    <title>blood: test suite</title>
    <meta name=viewport content="width=device-width,initial-scale=1.0">
    <meta name=description content="JavaScript test suite for blood.js">
    <meta name=author content="Ryan Van Etten">
    <style>
        html { font-family:sans-serif; background:#fffddd; color:#222; }
        body { width:96%; margin:auto; }
    </style>
</head>
<body>

<h1>
    <a href="http://github.com/ryanve/blood">blood</a>: test suite
</h1>

<!--
<main id="main" role="main">
    <p>Open the console to view results.</p>
    <p>View the pagesource to view tests.</p>
</main>
-->

<script src="http://airve.github.io/js/aok/aok.min.js"></script>
<script src="http://airve.github.io/js/underscore/underscore.min.js"></script>
<script src="blood.js"></script>
<script>
    (function(root) {
        var aok = root.aok
          , blood = root.blood
          , OP = Object.prototype;
        
        function testList(method, subject) {
            var arr = method(subject), msg = ' (length: ' + arr.length  + ')';
            this.fail += msg;
            this.pass += msg;
            return arr.length;
        }

        aok.prototype.express = aok.info;
        aok({
            id: 'arrProps'
          , test: function() {
                var arr = blood.props([]);
                this.remark = 'length: ' + arr.length;
                return arr.length;
            }
        });
        aok({
            id: 'objProps'
          , test: function() {
                var arr = blood.props({'length':1}), msg = ' (length: ' + arr.length  + ')';
                this.fail += msg;
                this.pass += msg;
                return arr.length;
            }
        });
        aok({
            id: 'funProps'
          , test: function() {
                var arr = blood.props(isFinite), msg = ' (length: ' + arr.length  + ')';
                this.fail += msg;
                this.pass += msg;
                return arr.length;
            }
        });
        aok({
            id: 'tree'
          , test: function() {
                var r, a = {id:'a'}, b = blood.create(a), c = blood.create(b);
                b.id = 'b';
                c.id = 'c';
                r = blood.tree(c);
                return 4 === r.length && c === r[0] && b === r[1] && a === r[2] && OP === r[3];
            }
        });
    }(this));
</script>
</body>
</html>